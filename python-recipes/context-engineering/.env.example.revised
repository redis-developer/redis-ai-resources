# Context Engineering Course - Environment Configuration (Revised)
# ================================================================
#
# This file contains all the environment variables needed for the
# Context Engineering course. Copy this file to .env and fill in
# your actual values.
#
# cp .env.example.revised .env
#
# Then edit .env with your specific configuration.

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# OpenAI API Configuration
# -------------------------
# Required for LLM interactions, embeddings, and course data generation
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key-here

# Example (replace with your actual key):
# OPENAI_API_KEY=sk-proj-abc123def456ghi789...

# =============================================================================
# SERVICE CONFIGURATION (STANDARDIZED)
# =============================================================================

# Redis Configuration
# -------------------
# Redis is used for vector storage, caching, and state persistence
# Default: redis://localhost:6379
REDIS_URL=redis://localhost:6379

# For Redis with authentication:
# REDIS_URL=redis://username:password@localhost:6379

# For Redis Cloud or remote instance:
# REDIS_URL=redis://your-redis-host:6379

# Agent Memory Server Configuration
# ---------------------------------
# The Agent Memory Server handles long-term memory and cross-session context
# STANDARDIZED PORT: 8088 (was inconsistent before)
AGENT_MEMORY_URL=http://localhost:8088

# For remote Agent Memory Server:
# AGENT_MEMORY_URL=https://your-memory-server.com

# =============================================================================
# COURSE-SPECIFIC CONFIGURATION
# =============================================================================

# Course Configuration
# --------------------
# Namespace for course-related data in Redis and memory systems
COURSE_NAMESPACE=redis_university

# Default student ID for CLI interactions
DEFAULT_STUDENT_ID=demo_student

# Learning Mode Override
# ----------------------
# Override automatic learning mode detection
# Options: full_interactive, redis_interactive, redis_demo, package_demo, conceptual
# LEARNING_MODE=full_interactive

# =============================================================================
# DEVELOPMENT AND DEBUGGING
# =============================================================================

# Logging Configuration
# ---------------------
# Set log level for debugging
# Options: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Enable verbose output for debugging
DEBUG=false

# Development Mode
# ----------------
# Enable development features and additional logging
DEV_MODE=false

# =============================================================================
# DOCKER CONFIGURATION (STANDARDIZED)
# =============================================================================

# Docker Compose Override
# -----------------------
# These variables are used by docker-compose.yml
# IMPORTANT: Standardized to avoid port conflicts

# Redis port mapping (host:container)
REDIS_PORT=6379:6379

# Agent Memory Server port mapping (host:container)
# Note: Maps host port 8088 to container port 8000
MEMORY_SERVER_PORT=8088:8000

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# OpenAI Model Configuration
# ---------------------------
# Override default models used by the course
OPENAI_CHAT_MODEL=gpt-4
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Token Limits and Costs
# ----------------------
# Maximum tokens for various operations
MAX_CONTEXT_TOKENS=128000
MAX_RESPONSE_TOKENS=4000

# Memory Configuration
# --------------------
# Memory-related settings
MEMORY_SEARCH_LIMIT=10
MEMORY_EXTRACTION_ENABLED=true

# Course Data Configuration
# -------------------------
# Settings for course data generation and management
COURSES_PER_MAJOR=15
COURSE_GENERATION_SEED=42

# =============================================================================
# SECURITY AND RATE LIMITING
# =============================================================================

# API Rate Limiting
# -----------------
# Protect against excessive API usage
OPENAI_RATE_LIMIT_RPM=60
OPENAI_RATE_LIMIT_TPM=40000

# Data Privacy
# ------------
# Enable/disable various privacy features
ANONYMIZE_STUDENT_DATA=false
ENABLE_AUDIT_LOGGING=false

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test Environment
# ----------------
# Configuration for running tests
TEST_REDIS_URL=redis://localhost:6380
TEST_MEMORY_URL=http://localhost:8089
TEST_OPENAI_API_KEY=sk-test-key-for-mocking

# Mock Services
# -------------
# Enable mock services for testing without external dependencies
MOCK_OPENAI=false
MOCK_REDIS=false
MOCK_MEMORY_SERVER=false

# =============================================================================
# QUICK START CONFIGURATIONS
# =============================================================================

# Uncomment one of these sections for quick setup:

# 1. FULL INTERACTIVE MODE (recommended)
# --------------------------------------
# Uncomment these lines for the complete experience:
# OPENAI_API_KEY=your-key-here
# REDIS_URL=redis://localhost:6379
# AGENT_MEMORY_URL=http://localhost:8088

# 2. DEMO MODE (no external services)
# -----------------------------------
# Uncomment these lines for offline learning:
# LEARNING_MODE=conceptual
# MOCK_OPENAI=true
# MOCK_REDIS=true
# MOCK_MEMORY_SERVER=true

# 3. REDIS ONLY MODE (course search without memory)
# -------------------------------------------------
# Uncomment these lines for Redis features only:
# REDIS_URL=redis://localhost:6379
# MOCK_MEMORY_SERVER=true

# =============================================================================
# MIGRATION FROM ORIGINAL SETUP
# =============================================================================

# Key Changes from Original Configuration:
# 
# 1. STANDARDIZED PORTS:
#    - Agent Memory Server: Always use port 8088 (was inconsistent)
#    - Docker mapping: 8088:8000 (host:container)
#
# 2. ENHANCED LEARNING MODES:
#    - Added redis_interactive mode
#    - Better fallback handling
#
# 3. IMPROVED ERROR HANDLING:
#    - Graceful degradation when services unavailable
#    - Better error messages and troubleshooting
#
# 4. SECURITY IMPROVEMENTS:
#    - Interactive API key entry
#    - No hardcoded secrets in notebooks
#
# 5. COMPREHENSIVE DOCUMENTATION:
#    - All variables explained
#    - Quick start configurations
#    - Troubleshooting guide

# =============================================================================
# TROUBLESHOOTING GUIDE
# =============================================================================

# Common Issues and Solutions:
#
# 1. "OpenAI API key not found"
#    Solution: Set OPENAI_API_KEY with a valid key starting with 'sk-'
#    Check: https://platform.openai.com/api-keys
#
# 2. "Redis connection failed"
#    Solution: Start Redis with: docker run -d -p 6379:6379 redis:8-alpine
#    Check: Verify REDIS_URL format: redis://localhost:6379
#
# 3. "Agent Memory Server not available"
#    Solution: Start with: docker-compose up -d (from course root)
#    Check: curl http://localhost:8088/v1/health
#
# 4. "Package import errors"
#    Solution: Install with: pip install -e ./reference-agent
#    Check: Python path and virtual environment
#
# 5. "Port conflicts"
#    Solution: Change REDIS_PORT or MEMORY_SERVER_PORT to available ports
#    Update: Corresponding URLs to match new ports
#
# 6. "Notebook setup fails"
#    Solution: Use revised notebooks with better error handling
#    Try: common_setup_revised.py for enhanced setup
#
# 7. "Service endpoint inconsistencies"
#    Solution: Use standardized port 8088 for Agent Memory Server
#    Update: All configurations to use consistent endpoints

# =============================================================================
# GETTING HELP
# =============================================================================

# For additional support:
# - Check SETUP.md in the course root directory
# - Review README.md in the reference-agent directory
# - Use the revised notebooks with enhanced error handling
# - Try the common_setup_revised.py module for better diagnostics
# - Look for troubleshooting sections in individual notebooks

# =============================================================================
# NOTES
# =============================================================================

# - Lines starting with # are comments and are ignored
# - Remove the # at the beginning of a line to enable that setting
# - Restart services after changing configuration
# - Keep your .env file secure and never commit it to version control
# - Use this revised example as a template for team members
# - The revised setup provides better error handling and offline modes
